import{c as Y}from"./chunk-S525J5DE.js";import{b as W}from"./chunk-ADC6SXVN.js";import{c as t,e as ve,f as s,g as x,h as M,i as P,j as p}from"./chunk-7V7WNOD5.js";var K=ve((xe,H)=>{H.exports=Serenity.Extensions});var de=s(p(),1),me=s(K(),1);var A=s(p(),1);var q=class q extends A.ColumnsBase{};t(q,"MovieCastColumns"),q.columnsKey="MovieDB.MovieCast",q.Fields=(0,A.fieldsProxy)();var I=q;var v=s(p(),1);var R=class R extends v.PrefixedContext{constructor(i){if(super(i),!R.init){R.init=!0;var e=v.LookupEditor,o=v.StringEditor;(0,v.initFormType)(R,["PersonId",e,"Character",o])}}};t(R,"MovieCastForm"),R.formKey="MovieDB.MovieCast";var B=R;var z=s(p(),1);var d=class d{};t(d,"MovieCastRow"),d.idProperty="MovieCastId",d.nameProperty="Character",d.localTextPrefix="MovieDB.MovieCast",d.deletePermission="Adminstration:General",d.insertPermission="Adminstration:General",d.readPermission="Adminstration:General",d.updatePermission="Adminstration:General",d.Fields=(0,z.fieldsProxy)();var f=d;var Q=s(p(),1),J;(e=>(e.baseUrl="MovieDB/MovieCast",e.Methods={Create:"MovieDB/MovieCast/Create",Update:"MovieDB/MovieCast/Update",Delete:"MovieDB/MovieCast/Delete",Retrieve:"MovieDB/MovieCast/Retrieve",List:"MovieDB/MovieCast/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(a,r,c){return(0,Q.serviceRequest)(e.baseUrl+"/"+o,a,r,c)}})))(J||(J={}));var E=s(p(),1);var X=s(p(),1);var G,b,V,w;V=[X.Decorators.registerFormatter("MovieTutorial.GenreListFormatter")];var D=class D{format(i){let e=i.value;if(!e||!e.length)return"";let o=G==null?void 0:G.itemById;return o?e.map(a=>{var r=o[a];return i.escape(r==null?a:r.Name)}).join(", "):(b!=null||(b=Y.getLookupAsync().then(a=>{var r;G=a;try{(r=i.grid)==null||r.invalidate()}finally{G=null,b=null}}).catch(()=>b=null)),W("i",{class:"fa fa-spinner"}))}};w=x(null),D=P(w,0,"GenreListFormatter",V,D),t(D,"GenreListFormatter"),M(w,1,D);var F=D;var k=class k extends E.ColumnsBase{};t(k,"MovieColumns"),k.columnsKey="MovieDB.Movie",k.Fields=(0,E.fieldsProxy)();var Z=k;var n=s(p(),1);var j=s(p(),1),_=s(K(),1);var L=s(p(),1);var l=class l{static getLookup(){return(0,L.getLookup)("MovieDb.Person")}static async getLookupAsync(){return(0,L.getLookupAsync)("MovieDb.Person")}};t(l,"PersonRow"),l.idProperty="PersonId",l.nameProperty="FullName",l.localTextPrefix="MovieDb.Person",l.lookupKey="MovieDb.Person",l.deletePermission="Adminstration:General",l.insertPermission="Adminstration:General",l.readPermission="Adminstration:General",l.updatePermission="Adminstration:General",l.Fields=(0,L.fieldsProxy)();var h=l;var $,U,fe;$=[j.Decorators.registerEditor("MovieSerenity.MovieDB.MovieCastEditor")];var S=class S extends(fe=_.GridEditorBase){getColumnsKey(){return I.columnsKey}getLocalTextPrefix(){return f.localTextPrefix}constructor(i){super(i)}getDialogType(){return O}getAddButtonCaption(){return"Add"}validateEntity(i,e){if(!super.validateEntity(i,e))return!1;var o=e!=null?e:i[this.getIdProperty()];return h.getLookupAsync().then(a=>{var c;var r=(c=this.view)==null?void 0:c.getItemById(o);r&&(r.PersonFullName=a.itemById[i.PersonId].FullName,this.view.updateItem(o,r))}),!0}};U=x(fe),S=P(U,0,"MovieCastEditor",$,S),t(S,"MovieCastEditor"),M(U,1,S);var T=S;var y=class y extends n.PrefixedContext{constructor(i){if(super(i),!y.init){y.init=!0;var e=n.StringEditor,o=n.TextAreaEditor,a=T,r=n.IntegerEditor,c=n.DateEditor,ce=n.EnumEditor,ue=n.LookupEditor;(0,n.initFormType)(y,["Title",e,"Description",o,"CastList",a,"Storyline",o,"Year",r,"ReleaseDate",c,"Runtime",r,"Kind",ce,"GenreList",ue])}}};t(y,"MovieForm"),y.formKey="MovieDB.Movie";var ee=y;var oe=s(p(),1);var u=class u{};t(u,"MovieGenresRow"),u.idProperty="MovieGenreId",u.localTextPrefix="MovieDB.MovieGenres",u.deletePermission="Adminstration:General",u.insertPermission="Adminstration:General",u.readPermission="Adminstration:General",u.updatePermission="Adminstration:General",u.Fields=(0,oe.fieldsProxy)();var te=u;var ie=s(p(),1),re;(e=>(e.baseUrl="MovieDB/MovieGenres",e.Methods={Create:"MovieDB/MovieGenres/Create",Update:"MovieDB/MovieGenres/Update",Delete:"MovieDB/MovieGenres/Delete",Retrieve:"MovieDB/MovieGenres/Retrieve",List:"MovieDB/MovieGenres/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(a,r,c){return(0,ie.serviceRequest)(e.baseUrl+"/"+o,a,r,c)}})))(re||(re={}));var ne=s(p(),1);var m=class m{};t(m,"MovieRow"),m.idProperty="MovieId",m.nameProperty="Title",m.localTextPrefix="MovieDB.Movie",m.deletePermission="Administration:General",m.insertPermission="Administration:General",m.readPermission="Administration:General",m.updatePermission="Administration:General",m.Fields=(0,ne.fieldsProxy)();var se=m;var pe=s(p(),1),ae;(e=>(e.baseUrl="MovieDB/Movie",e.Methods={Create:"MovieDB/Movie/Create",Update:"MovieDB/Movie/Update",Delete:"MovieDB/Movie/Delete",Retrieve:"MovieDB/Movie/Retrieve",List:"MovieDB/Movie/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(a,r,c){return(0,pe.serviceRequest)(e.baseUrl+"/"+o,a,r,c)}})))(ae||(ae={}));var le,N,ye;le=[de.Decorators.registerClass("MovieSerenity.MovieDB.MovieCastEditDialog")];var C=class C extends(ye=me.GridEditorDialog){constructor(){super(...arguments);this.form=new B(this.idPrefix)}getFormKey(){return B.formKey}getNameProperty(){return f.nameProperty}getLocalTextPrefix(){return f.localTextPrefix}};N=x(ye),C=P(N,0,"MovieCastEditDialog",le,C),t(C,"MovieCastEditDialog"),M(N,1,C);var O=C;export{h as a,f as b,J as c,Z as d,O as e,ee as f,se as g,ae as h};
//# sourceMappingURL=chunk-5HJBMG2O.js.map
