import{c as Y}from"./chunk-S525J5DE.js";import{b as W}from"./chunk-ADC6SXVN.js";import{c as t,e as ye,f as n,g as x,h as M,i as P,j as p}from"./chunk-7V7WNOD5.js";var O=ye((Pe,H)=>{H.exports=Serenity.Extensions});var me=n(p(),1),de=n(O(),1);var E=n(p(),1);var q=class q extends E.ColumnsBase{};t(q,"MovieCastColumns"),q.columnsKey="MovieDB.MovieCast",q.Fields=(0,E.fieldsProxy)();var k=q;var v=n(p(),1);var R=class R extends v.PrefixedContext{constructor(s){if(super(s),!R.init){R.init=!0;var e=v.LookupEditor,o=v.StringEditor;(0,v.initFormType)(R,["PersonId",e,"Character",o])}}};t(R,"MovieCastForm"),R.formKey="MovieDB.MovieCast";var I=R;var z=n(p(),1);var m=class m{};t(m,"MovieCastRow"),m.idProperty="MovieCastId",m.nameProperty="Character",m.localTextPrefix="MovieDB.MovieCast",m.deletePermission="Adminstration:General",m.insertPermission="Adminstration:General",m.readPermission="Adminstration:General",m.updatePermission="Adminstration:General",m.Fields=(0,z.fieldsProxy)();var y=m;var Q=n(p(),1),J;(e=>(e.baseUrl="MovieDB/MovieCast",e.Methods={Create:"MovieDB/MovieCast/Create",Update:"MovieDB/MovieCast/Update",Delete:"MovieDB/MovieCast/Delete",Retrieve:"MovieDB/MovieCast/Retrieve",List:"MovieDB/MovieCast/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(a,i,c){return(0,Q.serviceRequest)(e.baseUrl+"/"+o,a,i,c)}})))(J||(J={}));var A=n(p(),1);var X=n(p(),1);var B,G,V,K;V=[X.Decorators.registerFormatter("MovieTutorial.GenreListFormatter")];var D=class D{format(s){let e=s.value;if(!e||!e.length)return"";let o=B==null?void 0:B.itemById;return o?e.map(a=>{var i=o[a];return s.escape(i==null?a:i.Name)}).join(", "):(G!=null||(G=Y.getLookupAsync().then(a=>{var i;B=a;try{(i=s.grid)==null||i.invalidate()}finally{B=null,G=null}}).catch(()=>G=null)),W("i",{class:"fa fa-spinner"}))}};K=x(null),D=P(K,0,"GenreListFormatter",V,D),t(D,"GenreListFormatter"),M(K,1,D);var w=D;var b=class b extends A.ColumnsBase{};t(b,"MovieColumns"),b.columnsKey="MovieDB.Movie",b.Fields=(0,A.fieldsProxy)();var Z=b;var r=n(p(),1);var j=n(p(),1),_=n(O(),1);var L=n(p(),1);var l=class l{static getLookup(){return(0,L.getLookup)("MovieDb.Person")}static async getLookupAsync(){return(0,L.getLookupAsync)("MovieDb.Person")}};t(l,"PersonRow"),l.idProperty="PersonId",l.nameProperty="FullName",l.localTextPrefix="MovieDb.Person",l.lookupKey="MovieDb.Person",l.deletePermission="Adminstration:General",l.insertPermission="Adminstration:General",l.readPermission="Adminstration:General",l.updatePermission="Adminstration:General",l.Fields=(0,L.fieldsProxy)();var h=l;var $,F,xe;$=[j.Decorators.registerEditor("MovieSerenity.MovieDB.MovieCastEditor")];var g=class g extends(xe=_.GridEditorBase){getColumnsKey(){return k.columnsKey}getLocalTextPrefix(){return y.localTextPrefix}constructor(s){super(s)}getDialogType(){return U}getAddButtonCaption(){return"Add"}validateEntity(s,e){if(!super.validateEntity(s,e))return!1;var o=e!=null?e:s[this.getIdProperty()];return h.getLookupAsync().then(a=>{var c;var i=(c=this.view)==null?void 0:c.getItemById(o);i&&(i.PersonFullName=a.itemById[s.PersonId].FullName,this.view.updateItem(o,i))}),!0}};F=x(xe),g=P(F,0,"MovieCastEditor",$,g),t(g,"MovieCastEditor"),M(F,1,g);var T=g;var f=class f extends r.PrefixedContext{constructor(s){if(super(s),!f.init){f.init=!0;var e=r.StringEditor,o=r.TextAreaEditor,a=T,i=r.IntegerEditor,c=r.DateEditor,ce=r.EnumEditor,ue=r.LookupEditor,ve=r.ImageUploadEditor,Re=r.MultipleImageUploadEditor;(0,r.initFormType)(f,["Title",e,"Description",o,"CastList",a,"Storyline",o,"Year",i,"ReleaseDate",c,"Runtime",i,"Kind",ce,"GenreList",ue,"PrimaryImage",ve,"GalleryImages",Re])}}};t(f,"MovieForm"),f.formKey="MovieDB.Movie";var ee=f;var re=n(p(),1);var u=class u{};t(u,"MovieGenresRow"),u.idProperty="MovieGenreId",u.localTextPrefix="MovieDB.MovieGenres",u.deletePermission="Adminstration:General",u.insertPermission="Adminstration:General",u.readPermission="Adminstration:General",u.updatePermission="Adminstration:General",u.Fields=(0,re.fieldsProxy)();var te=u;var ie=n(p(),1),oe;(e=>(e.baseUrl="MovieDB/MovieGenres",e.Methods={Create:"MovieDB/MovieGenres/Create",Update:"MovieDB/MovieGenres/Update",Delete:"MovieDB/MovieGenres/Delete",Retrieve:"MovieDB/MovieGenres/Retrieve",List:"MovieDB/MovieGenres/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(a,i,c){return(0,ie.serviceRequest)(e.baseUrl+"/"+o,a,i,c)}})))(oe||(oe={}));var ne=n(p(),1);var d=class d{};t(d,"MovieRow"),d.idProperty="MovieId",d.nameProperty="Title",d.localTextPrefix="MovieDB.Movie",d.deletePermission="Administration:General",d.insertPermission="Administration:General",d.readPermission="Administration:General",d.updatePermission="Administration:General",d.Fields=(0,ne.fieldsProxy)();var se=d;var pe=n(p(),1),ae;(e=>(e.baseUrl="MovieDB/Movie",e.Methods={Create:"MovieDB/Movie/Create",Update:"MovieDB/Movie/Update",Delete:"MovieDB/Movie/Delete",Retrieve:"MovieDB/Movie/Retrieve",List:"MovieDB/Movie/List"},["Create","Update","Delete","Retrieve","List"].forEach(o=>{e[o]=function(a,i,c){return(0,pe.serviceRequest)(e.baseUrl+"/"+o,a,i,c)}})))(ae||(ae={}));var le,N,Me;le=[me.Decorators.registerClass("MovieSerenity.MovieDB.MovieCastEditDialog")];var S=class S extends(Me=de.GridEditorDialog){constructor(){super(...arguments);this.form=new I(this.idPrefix)}getFormKey(){return I.formKey}getNameProperty(){return y.nameProperty}getLocalTextPrefix(){return y.localTextPrefix}};N=x(Me),S=P(N,0,"MovieCastEditDialog",le,S),t(S,"MovieCastEditDialog"),M(N,1,S);var U=S;export{h as a,y as b,J as c,Z as d,U as e,ee as f,se as g,ae as h};
//# sourceMappingURL=chunk-H7MQ7HUV.js.map
