import{c as T}from"../../../_chunks/chunk-LMEZDWRS.js";import{b as O}from"../../../_chunks/chunk-ADC6SXVN.js";import{c as o,f as p,g as R,h as f,i as y,j as l}from"../../../_chunks/chunk-7V7WNOD5.js";var V=p(l(),1);var m=p(l(),1);var k=p(l(),1);var h=p(l(),1);var L,g,U,b;U=[h.Decorators.registerFormatter("MovieTutorial.GenreListFormatter")];var M=class M{format(r){let e=r.value;if(!e||!e.length)return"";let t=L==null?void 0:L.itemById;return t?e.map(n=>{var s=t[n];return r.escape(s==null?n:s.Name)}).join(", "):(g!=null||(g=T.getLookupAsync().then(n=>{var s;L=n;try{(s=r.grid)==null||s.invalidate()}finally{L=null,g=null}}).catch(()=>g=null)),O("i",{class:"fa fa-spinner"}))}};b=R(null),M=y(b,0,"GenreListFormatter",U,M),o(M,"GenreListFormatter"),f(b,1,M);var F=M;var q=class q extends k.ColumnsBase{};o(q,"MovieColumns"),q.columnsKey="MovieDB.Movie",q.Fields=(0,k.fieldsProxy)();var C=q;var i=p(l(),1);var v=class v extends i.PrefixedContext{constructor(r){if(super(r),!v.init){v.init=!0;var e=i.StringEditor,t=i.IntegerEditor,n=i.DateEditor,s=i.EnumEditor,u=i.LookupEditor;(0,i.initFormType)(v,["Title",e,"Description",e,"Storyline",e,"Year",t,"ReleaseDate",n,"Runtime",t,"Kind",s,"GenreList",u])}}};o(v,"MovieForm"),v.formKey="MovieDB.Movie";var P=v;var Y=p(l(),1);var c=class c{};o(c,"MovieGenresRow"),c.idProperty="MovieGenreId",c.localTextPrefix="MovieDB.MovieGenres",c.deletePermission="Adminstration:General",c.insertPermission="Adminstration:General",c.readPermission="Adminstration:General",c.updatePermission="Adminstration:General",c.Fields=(0,Y.fieldsProxy)();var A=c;var N=p(l(),1),Q;(e=>(e.baseUrl="MovieDB/MovieGenres",e.Methods={Create:"MovieDB/MovieGenres/Create",Update:"MovieDB/MovieGenres/Update",Delete:"MovieDB/MovieGenres/Delete",Retrieve:"MovieDB/MovieGenres/Retrieve",List:"MovieDB/MovieGenres/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(n,s,u){return(0,N.serviceRequest)(e.baseUrl+"/"+t,n,s,u)}})))(Q||(Q={}));var $=p(l(),1);var a=class a{};o(a,"MovieRow"),a.idProperty="MovieId",a.nameProperty="Title",a.localTextPrefix="MovieDB.Movie",a.deletePermission="Administration:General",a.insertPermission="Administration:General",a.readPermission="Administration:General",a.updatePermission="Administration:General",a.Fields=(0,$.fieldsProxy)();var d=a;var z=p(l(),1),D;(e=>(e.baseUrl="MovieDB/Movie",e.Methods={Create:"MovieDB/Movie/Create",Update:"MovieDB/Movie/Update",Delete:"MovieDB/Movie/Delete",Retrieve:"MovieDB/Movie/Retrieve",List:"MovieDB/Movie/List"},["Create","Update","Delete","Retrieve","List"].forEach(t=>{e[t]=function(n,s,u){return(0,z.serviceRequest)(e.baseUrl+"/"+t,n,s,u)}})))(D||(D={}));var B=p(l(),1);var H,I,X;H=[B.Decorators.registerClass("MovieSerenity.MovieDB.MovieDialog")];var S=class S extends(X=B.EntityDialog){constructor(){super(...arguments);this.form=new P(this.idPrefix)}getFormKey(){return P.formKey}getRowDefinition(){return d}getService(){return D.baseUrl}};I=R(X),S=y(I,0,"MovieDialog",H,S),o(S,"MovieDialog"),f(I,1,S);var E=S;var J,K,Z;J=[m.Decorators.registerClass("MovieSerenity.MovieDB.MovieGrid")];var x=class x extends(Z=m.EntityGrid){getColumnsKey(){return C.columnsKey}getDialogType(){return E}getRowDefinition(){return d}getService(){return D.baseUrl}getQuickSearchFields(){let r=o(t=>(0,m.localText)(`Db.${d.localTextPrefix}.${t}`),"txt"),e=d.Fields;return[{name:"",title:"All"},{name:e.Description,title:r(e.Description)},{name:e.Storyline,title:r(e.Storyline)},{name:e.Year,title:r(e.Year)}]}getQuickFilters(){let r=super.getQuickFilters(),e=(0,m.first)(r,t=>t.field==d.Fields.GenreList);return e.handler=t=>{let n=t.request,s=t.widget.values;n.Genres=s.map(u=>parseInt(u,10)),t.handled=!0},r}};K=R(Z),x=y(K,0,"MovieGrid",J,x),o(x,"MovieGrid"),f(K,1,x);var G=x;var Ze=o(()=>(0,V.gridPageInit)(G),"default");export{Ze as default};
//# sourceMappingURL=MoviePage.js.map
